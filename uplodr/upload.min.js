function $id(e){return document.getElementById(e)}function $ae(e,F,u){e.addEventListener(F,u,!1)}
(function(e,F,u){function g(b,a,c){b=document.createElement(b,c);a&&(b.innerHTML=a);for(var d in c)b.setAttribute(d,c[d]);return b}function v(b){b.stopPropagation();b.preventDefault();b.target.className="dragover"==b.type?"hover":"dropzone"}function w(b){var a,c;b instanceof FileList||(v(b),b=b.target.files||b.dataTransfer.files);x&&(x=y=z=0);for(a=0;c=b[a];a++)y+=c.size,f.push(c),p.innerHTML=f.length,q(!1,"fsel");f.length>r&&(h.style.display="inline-block")}function G(){if(!k){x=1;if("function"==
typeof d.doneFunc){var b=A,a=B;setTimeout(function(){d.doneFunc(b,a)},500)}B=A=0}}function q(b,a){b&&("ufo"==a&&A++,--l||G());if(!k&&f.length&&(!r||l<r)){var c=f.shift();new J(c);l++;p.innerHTML=f.length}0>=f.length&&(h.style.display="none",n.style.display="none")}function K(b,a){var c=this;c.show=function(a){c.pb.style.width=100*a+"%";1===a&&(c.pb.className="indeterm")};c.msg=function(a,b){c.pbi.innerHTML+="<br />"+a;b&&(c.pbi.className="pbfinf failure",B++)};c.remove=function(){c.pbw._ufo=null;
C.removeChild(c.pbw);c.fObj=null};var d=g("div","",{"class":"pbwrp"});c.pb=d.appendChild(g("div","",{"class":a}));c.pbi=d.appendChild(g("div",b.fileName+'<i class="fa fa-window-close abortX" aria-hidden="true" onclick="this.parentNode.parentNode._ufo.abort(true);"></i>',{"class":"pbfinf"}));C.appendChild(d);c.pbw=d;c.pbw._ufo=b;c.fObj=b;return this}function t(b){!D||0>b||(z+=b,D.style.width=100*z/y+"%")}function m(b,a){for(var c in a)b.append(c,a[c])}function J(b){var a=this;a.upFile=b;a.fileName=
b.fileName||b.name;a.size=b.size;a.upState="";a.doChnk=a.upFile.size>H;a.chnkSize=Math.round(H/2)-3072;a.relPath=b.webkitRelativePath||a.fileName;a.uniqueId=a.size+"-"+a.relPath.replace(/[^0-9a-zA-Z_-]/img,"");a.actSize=0;a.startByte=0;a.lastsz=0;a.numChnks=Math.max(Math.floor(a.size/a.chnkSize),1);a.chnkNum=0;a.fData=null;a.upForm={};a.xhr=new XMLHttpRequest;var c=function(b){a.xhr&&(a.xhr.upload.onprogress=null,a.xhr.onabort=null,a.xhr.onerror=null,a.xhr.onload=null,a.xhr=null);a.fData=null;b&&
a.pBar&&(a.pBar.remove(),a.pBar=null);q(!0,"ufo")},e=function(){a.fData=new FormData;m(a.fData,d.payload)},f=function(){e();switch(a.upState){case "":m(a.fData,a.upForm);a.fData.append("Filedata",a.upFile);a.upState="upld";break;case "upld":c(!0);return}a.xhr.open("POST",d.upURL);a.xhr.send(a.fData)},g=function(){e();switch(a.upState){case "":m(a.fData,{chunkact:"pref",file:a.fileName,size:a.size,ident:a.uniqueId});a.upState="chnk";break;case "chnk":m(a.fData,{chunkact:"chnk",ident:a.uniqueId,fname:a.fileName,
tchnk:a.numChnks});if(a.chnkNum==a.numChnks){c(!0);return}a.startByte=a.chnkNum*a.chnkSize;a.endByte=Math.min(a.size,(a.chnkNum+1)*a.chnkSize);a.size-a.endByte<a.chnkSize&&(a.endByte=a.size);a.actSize=a.endByte-a.startByte;a.fData.append("chnkn",++a.chnkNum);a.chnkNum==a.numChnks&&m(a.fData,a.upForm);a.fData.append("Filedata",a.upFile[I](a.startByte,a.endByte));a.lastsz=0;break;case "abrt":a.xhr.timeout=1E4;m(a.fData,{chunkact:"abrt",ident:a.uniqueId,fname:a.fileName});a.upState="nil";break;case "nil":c();
return}a.xhr.open("POST",d.upURL);a.xhr.send(a.fData)},h={prog:function(b){if(b.lengthComputable){var c=Math.round(b.loaded/b.total*a.actSize);"chnk"==a.upState&&a.chnkNum?(a.pBar.show((a.startByte+c)/a.size),t(c-a.lastsz),a.lastsz=c):"upld"==a.upState&&(a.pBar.show(b.loaded/b.total),c=Math.round(b.loaded/b.total*a.size),t(c-a.lastsz),a.lastsz=c)}},chng:function(b){4>this.readyState||(200!==this.status?(t(a.size-a.startByte-a.lastsz),a.lastsz=a.size,0===this.status?(a.pBar.msg("-- Aborted",!0),a.doChnk?
(a.upState="abrt",g()):c()):(a.pBar.msg(this.responseText||this.statusText||this.status,!0),c())):200===this.status&&(this.responseText.length?a.pBar.msg(this.responseText,!0):a.doChnk?g():f()))},fail:function(b){a.pBar.msg(this.responseText,!0)}};a.abort=function(b){a.xhr?(b=a.xhr.readyState,4>b&&0!==b?a.xhr.abort():h.abrt()):(a.pBar.remove(),a.pBar=null)};a.pBar=new K(a,a.doChnk?"chnkpb":"normpb");var k="";if("object"==typeof E&&E.length){var l=b.name.split(".");if(1==l.length||0>E.indexOf(l.pop().toLowerCase()))k=
"<i class=\"fa fa-info-circle infoG\" onclick=\"alert('Allowed file types: ' + H5uOpts.allowed_file_types.join(', '));\"></i> File type not allowed"}else b.size>d.maxfilesize&&(k="File is larger than allowed");if(k)a.pBar.msg(k,!0),t(b.size),a.xhr=null,q(!0,"errM");else return a.xhr.onreadystatechange=h.chng,a.xhr.upload.onerror=h.fail,a.xhr.upload.onprogress=h.prog,a.doChnk?g():f(),this}var d=Object.assign({},{lodrdiv:"uplodr",upURL:"upload.php",payload:{},maxFilesize:134217728,dropMessage:"Drop files here to upload<br>(or click to select)",
concurrent:3,maxchunksize:16777216,allowed_file_types:[],doneFunc:null},u),D,C,p,f=[],r=d.concurrent,E=d.allowed_file_types,H=d.maxchunksize,k=!1,l=0,y=0,z=0,x=0,A=0,B=0,h,n,I="";e.H5uSetup=function(){var b=$id(d.lodrdiv);e.File&&e.FileList?(b.appendChild(g("div",'<input type="file" name="userpictures" id="file_field" multiple="multiple" accept="image/*,video/*" style="display:none"><div class="drpmsg">'+d.dropMessage+"</div>",{id:"dropArea",onclick:"$id('file_field').click();"})),b.appendChild(g("div",
'<div id="progress_report_name"></div><div id="progress_report_status" style="font-style: italic;"></div><div id="totprogress"><div id="progress_report_bar"></div></div><div>Files queued: <span id="qcount">0</span><div class="acti" id="qstop"><i class="fa fa-pause-circle pausQ" title="stop queue" onclick="H5uQctrl.stop()"></i></div><div class="acti" id="qgocan"><i class="fa fa-play-circle playQ" title="resume queue" onclick="H5uQctrl.go()"></i><i class="fa fa-times cancelQ" title="cancel queue" alt="" onclick="H5uQctrl.cancel()"></i></div></div><div id="fprogress"></div><div id="server_response"></div>',
{id:"progress_report",style:"position:relative"})),p=$id("qcount"),h=$id("qstop"),n=$id("qgocan"),$ae($id("file_field"),"change",w),(new XMLHttpRequest).upload&&(b=$id("dropArea"),$ae(b,"dragover",v),$ae(b,"dragleave",v),$ae(b,"drop",w),b.style.display="block",D=$id("progress_report_bar"),C=$id("fprogress")),"undefined"!==typeof Blob&&(I=Blob.prototype.slice?"slice":Blob.prototype.webkitSlice?"webkitSlice":Blob.prototype.mozSlice?"mozSlice":"")):b.appendChild(g("div","Can not use this upload method with the web browser that you are using.",
{}))};e.H5uQctrl={stop:function(){k=!0;h.style.display="none";n.style.display="inline-block"},go:function(){k=!1;h.style.display="inline-block";for(n.style.display="none";f.length&&l<r;)q(!1,"go")},cancel:function(){f.length=0;k=!1;n.style.display="none";p.innerHTML=0;l||G()}};e.H5uOpts=d;e.fupQadd2=w})(window,[],h5uOptions||{});