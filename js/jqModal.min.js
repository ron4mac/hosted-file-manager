(function(c){c.fn.jqm=function(a){var b=c.extend({},c.jqm.params,a);return this.each(function(){var a=c(this),d=c(this).data("jqm");d||(d={ID:m++});a.data("jqm",c.extend(b,d)).addClass("jqm-init");b.trigger&&c(this).jqmAddTrigger(b.trigger)})};c.fn.jqmAddTrigger=function(a){return this.each(function(){h(c(this),"jqmShow",a)||window.console&&window.console.error&&window.console.error("jqmAddTrigger must be called on initialized modals")})};c.fn.jqmAddClose=function(a){return this.each(function(){h(c(this),
"jqmHide",a)||window.console&&window.console.error&&window.console.error("jqmAddClose must be called on initialized modals")})};c.fn.jqmShow=function(a){return this.each(function(){!this._jqmShown&&n(c(this),a)})};c.fn.jqmHide=function(a){return this.each(function(){if(this._jqmShown){var b=c(this),e=a,d=b.data("jqm"),e=e||window.event,b={w:b,c:d,o:b.data("jqmv"),t:e},e=b.w,d=b.o,f=b.c;!1!==f.onHide(b)&&(e[0]._jqmShown=!1,f.modal&&(g.pop(),!g[0]&&k("unbind")),f.toTop&&d&&c("#jqmP"+f.ID).after(e).remove())}})};
var n=function(a,b){var e=a.data("jqm");b=b||window.event;var d=parseInt(a.css("z-index"),10),d=0<d?d:3E3,f=c("<div></div>").addClass(e.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":d-1}),g={w:a,c:e,o:f,t:b};a.css("z-index",d);e.ajax?(d=e.target||a,f=e.ajax,d="string"==typeof d?c(d,a):c(d),"@"==f.substr(0,1)&&(f=c(b).attr(f.substring(1))),d.html(e.ajaxText),l(g),d.load(f,function(){e.onLoad&&e.onLoad.call(this,g)})):l(g)},h=function(a,b,e){return a.data("jqm")?
c(e).each(function(){this[b]=this[b]||[];this[b].push(a)}).click(function(){var a=this;c.each(this[b],function(c,e){e[b](a)});return!1}):!1},l=function(a){var b=a.w,e=a.o,d=a.c;!1!==d.onShow(a)&&(b[0]._jqmShown=!0,d.modal?(!g[0]&&k("bind"),g.push(b)):b.jqmAddClose(e),d.closeClass&&b.jqmAddClose(c("."+d.closeClass,b)),d.toTop&&e&&b.before('<span id="jqmP'+d.ID+'"></span>').insertAfter(e),b.data("jqmv",e))},k=function(a){c(document)[a]("keypress keydown mousedown",p)},p=function(a){a=c(a.target).data("jqm")||
c(a.target).parents(".jqm-init:first").data("jqm");var b=g[g.length-1].data("jqm");return a&&a.ID==b.ID?!0:c.jqm.focusFunc(b)},m=0,g=[];c.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,target:!1,ajaxText:"",modal:!1,toTop:!1,onShow:function(a){0<a.c.overlay&&(a.o.prependTo("body"),a.o.focus(),a.o.css("opacity",a.c.overlay/100));a.w.show();c.jqm.focusFunc(a.w);return!0},onHide:function(a){a.w.hide()&&a.o&&a.o.remove();return!0},onLoad:!1},focusFunc:function(a){c("input:text:visible:first",
a).focus();return!1}}})(jQuery);