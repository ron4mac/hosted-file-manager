(function(a){function l(c,b,d,n){var e=g[c];h=a("#"+e.id).find("ul:first").clone(!0);h.css(e.menuStyle).find("li").css(e.itemStyle).hover(function(){a(this).css(e.hoverStyle)},function(){a(this).css(e.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"});f.html(h);e.onShowMenu&&(f=e.onShowMenu(d,f));a.each(e.bindings,function(c,d){a("#"+c,f).bind("click",function(a){k();d(b,m)})});f.css({left:d[e.eventPosX],top:d[e.eventPosY]}).show();a(document).one("click",k)}function k(){f.hide()}
var f,h,g,m,c={menuStyle:{},itemStyle:{},hoverStyle:{},eventPosX:"pageX",eventPosY:"pageY",onContextMenu:null,onShowMenu:null};a.fn.contextMenu=function(h,b){f||(f=a('<div id="jqContextMenu" class="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(a){a.stopPropagation()}));g=g||[];g.push({id:h,menuStyle:a.extend({},c.menuStyle,b.menuStyle||{}),itemStyle:a.extend({},c.itemStyle,b.itemStyle||{}),hoverStyle:a.extend({},c.hoverStyle,b.hoverStyle||
{}),bindings:b.bindings||{},onContextMenu:b.onContextMenu||c.onContextMenu,onShowMenu:b.onShowMenu||c.onShowMenu,eventPosX:b.eventPosX||c.eventPosX,eventPosY:b.eventPosY||c.eventPosY});var d=g.length-1;a(this).bind("contextmenu",function(a){(g[d].onContextMenu?g[d].onContextMenu(a):1)&&l(d,this,a,b);return!1});return this};a.contextMenu={defaults:function(f){a.each(f,function(b,d){"object"==typeof d&&c[b]?a.extend(c[b],d):c[b]=d})}}})(jQuery);